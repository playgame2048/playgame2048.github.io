<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Block Puzzle</title>

<style>
:root{
  --bg:#f2f2f2;
  --text:#111;
  --card:#fff;
}
body.dark{
  --bg:#121212;
  --text:#eee;
  --card:#1e1e1e;
}
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
  text-align:center;
}
header{padding:10px}
.controls{
  display:flex;
  justify-content:center;
  gap:10px;
  flex-wrap:wrap;
}
canvas{
  background:#ddd;
  border-radius:10px;
  margin:15px auto;
  display:block;
}
button{
  padding:6px 12px;
  cursor:pointer;
}
.mobile{
  display:flex;
  justify-content:center;
  gap:15px;
  flex-wrap:wrap;
}
.blog{
  max-width:600px;
  margin:25px auto;
  padding:20px;
  background:var(--card);
  border-radius:10px;
  text-align:left;
  font-size:16px;
}
.blog h2{text-align:center}
#gameOver{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  color:#fff;
  display:none;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  font-size:24px;
}
#restartLink{
  margin-top:8px;
  font-size:14px;
}
footer{font-size:12px;margin:10px}
</style>
</head>

<body>

<header>
  <h1>üß© Block Puzzle</h1>
  <div class="controls">
    <span id="score">Score: 0</span>
    <button onclick="start()">‚ôªÔ∏è Restart</button>
    <button onclick="toggleDark()">üåô Dark Mode</button>
  </div>
</header>

<canvas id="game" width="300" height="400"></canvas>

<div class="mobile">
  <button onclick="rotate()">‚¨ÜÔ∏è</button>
  <button onclick="move(-1)">‚¨ÖÔ∏è</button>
  <button onclick="drop()">‚¨áÔ∏è</button>
  <button onclick="move(1)">‚û°Ô∏è</button>
</div>

<section class="blog">
  <h2>How to Play</h2>
  <ul>
    <li>Move blocks left or right</li>
    <li>Rotate blocks using the up button</li>
    <li>Complete full rows to clear them</li>
    <li>Blocks above fall down automatically</li>
    <li>Game ends when the grid is full</li>
  </ul>
</section>

<footer>¬© 2026 Block Puzzle</footer>

<div id="gameOver">
  <div>Game Over</div>
  <button onclick="start()">‚ôªÔ∏è Restart</button>
  <div id="restartLink">
    <a href="PUT_YOUR_MONETAG_LINK_HERE" target="_blank" style="color:#4caf50">
      Continue
    </a>
  </div>
</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

const COLS=15;
const ROWS=20;
const SIZE=canvas.width/COLS;

let grid,current,score=0,gameOver=false;
const scoreEl=document.getElementById("score");
const overBox=document.getElementById("gameOver");

const SHAPES=[
 [[1,1],[1,1]],
 [[1,1,1,1]],
 [[1,0],[1,0],[1,1]],
 [[0,1],[0,1],[1,1]],
 [[1,1,0],[0,1,1]]
];

function emptyGrid(){
  return Array.from({length:ROWS},()=>Array(COLS).fill(0));
}

function newBlock(){
  return{
    x:6,
    y:0,
    shape:JSON.parse(JSON.stringify(
      SHAPES[Math.floor(Math.random()*SHAPES.length)]
    ))
  };
}

function rotate(){
  if(gameOver) return;
  const rotated=current.shape[0].map((_,i)=>
    current.shape.map(row=>row[i]).reverse()
  );
  const old=current.shape;
  current.shape=rotated;
  if(collide()) current.shape=old;
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  for(let y=0;y<ROWS;y++){
    for(let x=0;x<COLS;x++){
      ctx.fillStyle=grid[y][x]?"#4caf50":"#bbb";
      ctx.fillRect(x*SIZE,y*SIZE,SIZE-1,SIZE-1);
    }
  }

  ctx.fillStyle="#2196f3";
  current.shape.forEach((row,y)=>{
    row.forEach((v,x)=>{
      if(v){
        ctx.fillRect(
          (current.x+x)*SIZE,
          (current.y+y)*SIZE,
          SIZE-1,SIZE-1
        );
      }
    });
  });
}

function collide(){
  return current.shape.some((row,y)=>
    row.some((v,x)=>{
      if(!v)return false;
      let ny=current.y+y;
      let nx=current.x+x;
      return ny>=ROWS||nx<0||nx>=COLS||grid[ny][nx];
    })
  );
}

function merge(){
  current.shape.forEach((row,y)=>{
    row.forEach((v,x)=>{
      if(v) grid[current.y+y][current.x+x]=1;
    });
  });
}

function clearLines(){
  for(let y=ROWS-1;y>=0;y--){
    if(grid[y].every(c=>c)){
      grid.splice(y,1);
      grid.unshift(Array(COLS).fill(0));
      score+=10;
      y++;
    }
  }
  scoreEl.textContent="Score: "+score;
}

function drop(){
  if(gameOver) return;
  current.y++;
  if(collide()){
    current.y--;
    merge();
    clearLines();
    current=newBlock();
    if(collide()){
      gameOver=true;
      overBox.style.display="flex";
    }
  }
}

function move(dir){
  if(gameOver) return;
  current.x+=dir;
  if(collide()) current.x-=dir;
}

document.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft")move(-1);
  if(e.key==="ArrowRight")move(1);
  if(e.key==="ArrowDown")drop();
  if(e.key==="ArrowUp")rotate();
});

function start(){
  grid=emptyGrid();
  current=newBlock();
  score=0;
  gameOver=false;
  scoreEl.textContent="Score: 0";
  overBox.style.display="none";
}

function toggleDark(){
  document.body.classList.toggle("dark");
}

start();
setInterval(()=>{drop();draw();},700);
</script>

</body>
</html>
