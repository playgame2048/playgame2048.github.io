<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-F584GKZ8S7"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-F584GKZ8S7');
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ğŸ§© Tetris Classic â€“ Block Puzzle</title>

  <style>
    /* ========== GLOBAL â€“ TETRIS CLASSIC INSPIRED, COMPACT ========== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      --bg-light: #f0f3f8;
      --bg-dark: #0a0e17;
      --text-light: #1e293b;
      --text-dark: #e2e8f0;
      --card-light: rgba(255,255,255,0.85);
      --card-dark: rgba(20,30,45,0.85);
      --border-light: #e2e8f0;
      --border-dark: #334155;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-light);
      color: var(--text-light);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 15px;
      transition: background 0.2s, color 0.2s;
    }

    body.dark {
      background: var(--bg-dark);
      color: var(--text-dark);
    }

    /* ===== MAIN CONTAINER â€“ Ø£ØµØºØ± ÙˆØ£ÙƒØ«Ø± ØªØ±ÙƒÙŠØ²Ø§Ù‹ ===== */
    .game-container {
      max-width: 600px;   /* Ù…ØµØºØ± */
      width: 100%;
      background: var(--card-light);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid var(--border-light);
      border-radius: 32px;
      padding: 20px 20px 25px;
      box-shadow: 0 15px 30px -10px rgba(0,0,0,0.1);
      transition: 0.2s;
    }

    body.dark .game-container {
      background: var(--card-dark);
      border-color: var(--border-dark);
    }

    /* ===== HEADER â€“ Tetris vibe ===== */
    header {
      text-align: center;
      margin-bottom: 10px;
    }

    .game-title {
      font-size: 2.6rem;
      font-weight: 800;
      letter-spacing: 2px;
      color: #2563eb;
      text-shadow: 0 5px 0 #1e40af, 0 8px 15px rgba(37,99,235,0.3);
      margin-bottom: 2px;
    }

    body.dark .game-title {
      color: #60a5fa;
      text-shadow: 0 5px 0 #2563eb, 0 8px 15px rgba(96,165,250,0.3);
    }

    .game-subtitle {
      font-size: 0.85rem;
      color: #64748b;
      margin-bottom: 15px;
    }

    /* ===== BUTTONS â€“ Ù…Ø¶ØºÙˆØ·Ø© ===== */
    .top-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 15px;
    }

    .btn {
      border: none;
      padding: 10px 24px;
      border-radius: 60px;
      font-size: 0.9rem;
      font-weight: 600;
      letter-spacing: 0.5px;
      cursor: pointer;
      background: #2563eb;
      color: white;
      box-shadow: 0 5px 0 #1e40af;
      transition: 0.06s;
      border: 1px solid rgba(255,255,255,0.2);
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 0 #1e40af;
    }

    .btn:active {
      transform: translateY(3px);
      box-shadow: 0 2px 0 #1e40af;
    }

    .dark-btn {
      background: #334155;
      box-shadow: 0 5px 0 #1e293b;
    }

    /* ===== SCORE â€“ Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ ===== */
    .score-area {
      display: flex;
      justify-content: center;
      margin-top: 5px;
    }

    #score {
      background: #e2e8f0;
      padding: 8px 30px;
      border-radius: 60px;
      font-size: 1.4rem;
      font-weight: 700;
      color: #2563eb;
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
    }

    body.dark #score {
      background: #0f172a;
      color: #60a5fa;
    }

    /* ===== CANVAS â€“ Ø­Ø¬Ù… Ø«Ø§Ø¨Øª ===== */
    .canvas-wrapper {
      display: flex;
      justify-content: center;
      margin: 8px 0 5px;
    }

    canvas {
      background: #cbd5e1;
      border-radius: 14px;
      box-shadow: inset 0 0 0 2px rgba(0,0,0,0.05), 0 10px 20px rgba(0,0,0,0.2);
      width: 100%;
      height: auto;
      aspect-ratio: 3 / 4;
      display: block;
      image-rendering: crisp-edges;
    }

    body.dark canvas {
      background: #1e293b;
      box-shadow: inset 0 0 0 2px rgba(255,255,255,0.05), 0 10px 20px rgba(0,0,0,0.5);
    }

    /* ===== CONTROLS â€“ Ù…ØªØ¬Ø§ÙˆØ¨Ø© ===== */
    .control-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 10px 0 5px;
      flex-wrap: wrap;
      gap: 10px;
    }

    .key-hint {
      font-size: 1.2rem;
      letter-spacing: 8px;
      color: #64748b;
      background: rgba(0,0,0,0.02);
      padding: 6px 14px;
      border-radius: 30px;
    }

    .mobile-controls {
      display: flex;
      gap: 10px;
    }

    .mobile-btn {
      width: 48px;
      height: 48px;
      border-radius: 30px;
      border: none;
      background: #2563eb;
      color: white;
      font-size: 1.5rem;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 5px 0 #1e40af;
      transition: 0.05s;
      cursor: pointer;
    }

    .mobile-btn:active {
      transform: translateY(5px);
      box-shadow: 0 0 0 #1e40af;
    }

    @media (min-width: 769px) {
      .mobile-controls { display: none; }
    }

    @media (max-width: 768px) {
      .key-hint { display: none; }
      .control-row { justify-content: center; }
    }

    /* ===== AD CONTAINER ===== */
    .ad-container {
      margin: 20px auto 10px;
      max-width: 600px;
      border-radius: 14px;
      overflow: hidden;
      background: rgba(0,0,0,0.02);
      padding: 3px;
    }

    /* ===== BLOG â€“ ÙƒØ±ÙˆØª Ø²Ø¬Ø§Ø¬ÙŠØ© ===== */
    .blog {
      margin-top: 25px;
      background: rgba(255,255,255,0.6);
      backdrop-filter: blur(8px);
      border: 1px solid var(--border-light);
      border-radius: 24px;
      padding: 20px 22px;
      text-align: left;
    }

    body.dark .blog {
      background: rgba(15,23,42,0.7);
      border-color: var(--border-dark);
    }

    .blog h2 {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 12px;
      color: var(--text-light);
      border-left: 6px solid #2563eb;
      padding-left: 15px;
    }

    .blog p, .blog ul {
      color: #475569;
      line-height: 1.6;
      font-size: 0.95rem;
    }

    body.dark .blog p,
    body.dark .blog ul {
      color: #cbd5e1;
    }

    .blog ul {
      padding-left: 25px;
      list-style-type: 'ğŸ§± ';
    }

    .support-btn {
      display: inline-block;
      margin-top: 15px;
      padding: 12px 28px;
      background: linear-gradient(145deg, #2563eb, #1d4ed8);
      color: white;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      border: 1px solid rgba(255,255,255,0.3);
      box-shadow: 0 6px 0 #0f2c5e;
      transition: 0.06s;
    }

    .support-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 9px 0 #0f2c5e;
    }

    /* ===== GAME OVER â€“ Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ ===== */
    #gameOver {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(4px);
      display: none;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      z-index: 1000;
    }

    #gameOver > div {
      font-size: 2.5rem;
      font-weight: 800;
      color: #2563eb;
      text-shadow: 0 5px 0 #1e40af;
      margin-bottom: 20px;
    }

    body.dark #gameOver > div {
      color: #60a5fa;
      text-shadow: 0 5px 0 #2563eb;
    }

    #gameOver button {
      background: #2563eb;
      color: white;
      border: none;
      padding: 14px 36px;
      border-radius: 60px;
      font-size: 1.2rem;
      font-weight: bold;
      box-shadow: 0 8px 0 #1e40af;
      cursor: pointer;
      transition: 0.06s;
    }

    #gameOver button:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 0 #1e40af;
    }

    /* ===== FOOTER ===== */
    footer {
      text-align: center;
      margin-top: 20px;
      font-size: 0.75rem;
      color: #64748b;
    }

    body.dark footer {
      color: #94a3b8;
    }

    /* ===== Ù…ÙˆØ¨Ø§ÙŠÙ„ ØªØµØºÙŠØ± Ø¥Ø¶Ø§ÙÙŠ ===== */
    @media (max-width: 500px) {
      .game-container { padding: 15px; }
      .game-title { font-size: 2.2rem; }
      .top-buttons { flex-direction: column; align-items: center; }
      .btn { width: 100%; justify-content: center; }
      #score { font-size: 1.2rem; padding: 6px 20px; }
      .blog { padding: 16px; }
    }
  </style>
</head>
<body>
  <div class="game-container">
    <header>
      <h1 class="game-title">ğŸ§© Tetris</h1>
      <p class="game-subtitle">Classic block puzzle â€“ simple to learn, hard to master</p>
      
      <div class="top-buttons">
        <button onclick="restartGame()" class="btn restart-btn">âŸ³ New Game</button>
        <button onclick="toggleDark()" class="btn dark-btn">ğŸŒ™ Dark</button>
      </div>

      <div class="score-area">
        <div id="score">Score: 0</div>
      </div>
    </header>

    <div class="canvas-wrapper">
      <canvas id="game" width="300" height="400"></canvas>
    </div>

    <div class="control-row">
      <div class="key-hint">â¬…ï¸ â¡ï¸ â¬‡ï¸ â¬†ï¸</div>
      <div class="mobile-controls">
        <button onclick="rotate(event)" class="mobile-btn">â†»</button>
        <button onclick="move(-1,event)" class="mobile-btn">â†</button>
        <button onclick="drop(event)" class="mobile-btn">â†“</button>
        <button onclick="move(1,event)" class="mobile-btn">â†’</button>
      </div>
    </div>

    <!-- Monetag Vignette Ad â€“ ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ -->
    <div class="ad-container">
      <script>
        (function(s){
          s.dataset.zone='10534618';
          s.src='https://gizokraijaw.net/vignette.min.js';
        })([document.documentElement, document.body].filter(Boolean)
          .pop()
          .appendChild(document.createElement('script')));
      </script>
    </div>

    <!-- Blog Section â€“ Ù†ÙØ³ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
    <section class="blog">
      <h2>ğŸ® How to Play</h2>
      <p>Block Puzzle is a classic block-dropping game. Your goal is to place blocks smartly and clear full rows to earn points.</p>
      <ul>
        <li>Move blocks left and right to position them</li>
        <li>Rotate blocks to fit empty spaces</li>
        <li>Complete full rows to clear them</li>
        <li>The game ends when the grid is full</li>
      </ul>

      <h2>ğŸ† How to Win & Improve</h2>
      <p>There is no final level. The challenge is to survive longer and reach a higher score.</p>
      <ul>
        <li>Keep the grid as low as possible</li>
        <li>Plan moves before dropping blocks</li>
        <li>Use rotations wisely</li>
        <li>Stay calm and avoid rushing</li>
      </ul>

      <h2>â›‘ï¸ Support the Game</h2>
      <p>If you enjoy this game and would like to support future updates, you can help by making a small donation.</p>
      <a class="support-btn" href="https://ko-fi.com/help_tommy" target="_blank">â¤ï¸ Support Us</a>
    </section>

    <footer>Â© 2026 Block Puzzle Â· Classic Tetris-style</footer>
  </div>

  <!-- Game Over â€“ Ù†ÙØ³ Ø§Ù„ØªØ±ÙƒÙŠØ¨ Ø§Ù„Ø£ØµÙ„ÙŠ -->
  <div id="gameOver">
    <div>Game Over</div>
    <button onclick="restartGame()">â™»ï¸ Restart</button>
  </div>

  <!-- ========== ÙƒÙˆØ¯ JavaScript Ø§Ù„Ø£ØµÙ„ÙŠ â€“ Ù„Ø§ ØªØºÙŠÙŠØ± ========== -->
  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    const COLS = 15, ROWS = 20;
    const SIZE = canvas.width / COLS;

    let grid, current, score = 0, gameOver = false;
    let restartClickedOnce = false;

    const scoreEl = document.getElementById("score");
    const overBox = document.getElementById("gameOver");

    // ğŸ”— Monetag link (Restart first click)
    const AFFILIATE_LINK = "https://otieu.com/4/10534586";

    const SHAPES = [
      { shape: [[1,1],[1,1]], color: "#f44336" },
      { shape: [[1,1,1,1]], color: "#2196f3" },
      { shape: [[1,0],[1,0],[1,1]], color: "#4caf50" },
      { shape: [[0,1],[0,1],[1,1]], color: "#ff9800" },
      { shape: [[1,1,0],[0,1,1]], color: "#9c27b0" }
    ];

    function emptyGrid() {
      return Array.from({ length: ROWS }, () => Array(COLS).fill(null));
    }

    function newBlock() {
      const b = SHAPES[Math.floor(Math.random() * SHAPES.length)];
      return {
        x: 6, y: 0,
        shape: JSON.parse(JSON.stringify(b.shape)),
        color: b.color
      };
    }

    function rotate(e) {
      if (e) e.preventDefault();
      if (gameOver) return;
      const r = current.shape[0].map((_, i) => current.shape.map(row => row[i]).reverse());
      const old = current.shape;
      current.shape = r;
      if (collide()) current.shape = old;
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let y = 0; y < ROWS; y++) {
        for (let x = 0; x < COLS; x++) {
          ctx.fillStyle = grid[y][x] || "#bbb";
          ctx.fillRect(x * SIZE, y * SIZE, SIZE - 1, SIZE - 1);
        }
      }
      ctx.fillStyle = current.color;
      current.shape.forEach((row, y) => {
        row.forEach((v, x) => {
          if (v) {
            ctx.fillRect((current.x + x) * SIZE, (current.y + y) * SIZE, SIZE - 1, SIZE - 1);
          }
        });
      });
    }

    function collide() {
      return current.shape.some((row, y) =>
        row.some((v, x) => {
          if (!v) return false;
          let ny = current.y + y, nx = current.x + x;
          return ny >= ROWS || nx < 0 || nx >= COLS || grid[ny][nx];
        })
      );
    }

    function merge() {
      current.shape.forEach((row, y) => {
        row.forEach((v, x) => {
          if (v) grid[current.y + y][current.x + x] = current.color;
        });
      });
    }

    function clearLines() {
      for (let y = ROWS - 1; y >= 0; y--) {
        if (grid[y].every(c => c)) {
          grid.splice(y, 1);
          grid.unshift(Array(COLS).fill(null));
          score += 10;
          y++;
        }
      }
      scoreEl.textContent = "Score: " + score;
    }

    function drop(e) {
      if (e) e.preventDefault();
      if (gameOver) return;
      current.y++;
      if (collide()) {
        current.y--;
        merge();
        clearLines();
        current = newBlock();
        if (collide()) {
          gameOver = true;
          overBox.style.display = "flex";
        }
      }
    }

    function move(dir, e) {
      if (e) e.preventDefault();
      if (gameOver) return;
      current.x += dir;
      if (collide()) current.x -= dir;
    }

    document.addEventListener("keydown", e => {
      if (["ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight"].includes(e.key))
        e.preventDefault();
      if (e.key === "ArrowLeft") move(-1);
      if (e.key === "ArrowRight") move(1);
      if (e.key === "ArrowDown") drop();
      if (e.key === "ArrowUp") rotate();
    });

    function restartGame() {
      if (!restartClickedOnce) {
        restartClickedOnce = true;
        window.open(AFFILIATE_LINK, "_blank");
        return;
      }
      start();
    }

    function start() {
      grid = emptyGrid();
      current = newBlock();
      score = 0;
      gameOver = false;
      scoreEl.textContent = "Score: 0";
      overBox.style.display = "none";
    }

    function toggleDark() {
      document.body.classList.toggle("dark");
    }

    start();
    setInterval(() => { drop(); draw(); }, 700);
  </script>
</body>
</html>
